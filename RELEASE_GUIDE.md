# ğŸ“¦ å‘å¸ƒæŒ‡å—

## è‡ªåŠ¨å‘å¸ƒè„šæœ¬

æœ¬é¡¹ç›®æä¾›äº†è‡ªåŠ¨å‘å¸ƒè„šæœ¬ `release.sh`ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–å®Œæˆç‰ˆæœ¬å‘å¸ƒæµç¨‹ã€‚

---

## å¿«é€Ÿå¼€å§‹

### è¿è¡Œè„šæœ¬

```bash
cd /Users/sai/good_tool/xxxxx/m3u8-downloader
bash release.sh
```

æˆ–

```bash
./release.sh
```

---

## åŠŸèƒ½ç‰¹æ€§

### âœ… è‡ªåŠ¨åŒ–æµç¨‹

1. **è¯»å–å½“å‰ç‰ˆæœ¬** - ä» package.json è¯»å–
2. **é€‰æ‹©ç‰ˆæœ¬ç±»å‹** - Patch/Minor/Major/Custom
3. **è¾“å…¥æ›´æ–°è¯´æ˜** - æ”¯æŒå¤šè¡Œè¾“å…¥
4. **æ›´æ–°ç‰ˆæœ¬å·** - è‡ªåŠ¨æ›´æ–° 3 ä¸ªæ–‡ä»¶
5. **æäº¤ä»£ç ** - Git commit
6. **åˆ›å»º Tag** - å¸¦è¯¦ç»†è¯´æ˜
7. **æ¨é€åˆ° GitHub** - ä»£ç  + Tag

### âœ… æ™ºèƒ½æ£€æµ‹

- **æ£€æŸ¥å·¥ä½œç›®å½•** - æ˜¯å¦æœ‰æœªæäº¤æ›´æ”¹
- **æ˜¾ç¤ºå·²æœ‰ Tags** - æœ€è¿‘ 5 ä¸ªç‰ˆæœ¬
- **æ”¯æŒé‡æ–°å‘å¸ƒ** - è¦†ç›–å·²æœ‰ tag
- **é”™è¯¯å¤„ç†** - é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º

### âœ… ç‰ˆæœ¬ç®¡ç†

**æ”¯æŒ 4 ç§ç‰ˆæœ¬ç±»å‹ï¼š**

1. **Patch (è¡¥ä¸ç‰ˆæœ¬)** - Bug ä¿®å¤
   - ç¤ºä¾‹ï¼š`1.0.0` â†’ `1.0.1`

2. **Minor (æ¬¡è¦ç‰ˆæœ¬)** - æ–°åŠŸèƒ½
   - ç¤ºä¾‹ï¼š`1.0.0` â†’ `1.1.0`

3. **Major (ä¸»è¦ç‰ˆæœ¬)** - é‡å¤§æ›´æ–°
   - ç¤ºä¾‹ï¼š`1.0.0` â†’ `2.0.0`

4. **Custom (è‡ªå®šä¹‰)** - ä»»æ„ç‰ˆæœ¬å·
   - ç¤ºä¾‹ï¼š`1.0.0` â†’ `1.2.3`

---

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: å‘å¸ƒè¡¥ä¸ç‰ˆæœ¬ï¼ˆBug ä¿®å¤ï¼‰

```bash
$ bash release.sh

ğŸš€ M3U8 Downloader è‡ªåŠ¨å‘å¸ƒè„šæœ¬

ğŸ“¦ è¯»å–å½“å‰ç‰ˆæœ¬...
å½“å‰ç‰ˆæœ¬: v1.0.0

ğŸ·ï¸  å·²æœ‰çš„ Git Tags:
v1.0.0

ğŸ“‹ æ£€æŸ¥ Git çŠ¶æ€...
âœ… æ£€æµ‹åˆ°ä»£ç æ›´æ”¹
 M src/index.html

ğŸ”¢ é€‰æ‹©ç‰ˆæœ¬æ›´æ–°ç±»å‹:
  1) Patch  (Bug ä¿®å¤)    1.0.0 â†’ 1.0.1
  2) Minor  (æ–°åŠŸèƒ½)      1.0.0 â†’ 1.1.0
  3) Major  (é‡å¤§æ›´æ–°)    1.0.0 â†’ 2.0.0
  4) Custom (è‡ªå®šä¹‰ç‰ˆæœ¬)

è¯·é€‰æ‹© [1-4] (é»˜è®¤: 1): 1

âœ… æ–°ç‰ˆæœ¬: v1.0.1

ğŸ“ è¾“å…¥æœ¬æ¬¡æ›´æ–°è¯´æ˜:
æç¤º: æŒ‰å›è½¦ç»“æŸè¾“å…¥ï¼Œè¾“å…¥ '.' å•ç‹¬ä¸€è¡Œè¡¨ç¤ºå¤šè¡Œè¾“å…¥ç»“æŸ

ä¿®å¤æ–‡ä»¶ä¿å­˜åŠŸèƒ½
.

æ›´æ–°è¯´æ˜:
ä¿®å¤æ–‡ä»¶ä¿å­˜åŠŸèƒ½

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ å‘å¸ƒæ‘˜è¦
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  é¡¹ç›®åç§°: M3U8 Downloader
  å½“å‰ç‰ˆæœ¬: v1.0.0
  æ–°ç‰ˆæœ¬:   v1.0.1
  æ›´æ–°ç±»å‹: patch
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ç¡®è®¤å‘å¸ƒï¼Ÿ[y/N]: y

ğŸš€ å¼€å§‹å‘å¸ƒæµç¨‹...

ğŸ“ æ›´æ–°ç‰ˆæœ¬å·...
  âœ“ package.json
  âœ“ src-tauri/Cargo.toml
  âœ“ src-tauri/tauri.conf.json
âœ… ç‰ˆæœ¬å·æ›´æ–°å®Œæˆ

ğŸ“¦ æäº¤ä»£ç åˆ° Git...
âœ… ä»£ç å·²æäº¤

ğŸ·ï¸  åˆ›å»º Git Tag...
âœ… Tag v1.0.1 å·²åˆ›å»º

â˜ï¸  æ¨é€åˆ° GitHub...
âœ… ä»£ç å·²æ¨é€åˆ° main
âœ… Tag å·²æ¨é€

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          âœ… å‘å¸ƒæˆåŠŸï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“¦ ç‰ˆæœ¬: v1.0.1
ğŸ·ï¸  Tag:  v1.0.1
```

### ç¤ºä¾‹ 2: é‡æ–°å‘å¸ƒå½“å‰ç‰ˆæœ¬

```bash
$ bash release.sh

ğŸ“‹ æ£€æŸ¥ Git çŠ¶æ€...
âœ… å·¥ä½œç›®å½•å¹²å‡€ï¼ˆæ— æœªæäº¤æ›´æ”¹ï¼‰

é€‰æ‹©æ“ä½œ:
  1) é‡æ–°å‘å¸ƒå½“å‰ç‰ˆæœ¬ v1.0.0 (å¼ºåˆ¶è¦†ç›– tag)
  2) åˆ›å»ºæ–°ç‰ˆæœ¬
  3) é€€å‡º

è¯·é€‰æ‹© [1-3] (é»˜è®¤: 3): 1

âš ï¸  å°†é‡æ–°å‘å¸ƒç‰ˆæœ¬ v1.0.0

ğŸ“ è¾“å…¥æœ¬æ¬¡æ›´æ–°è¯´æ˜:
æç¤º: é‡æ–°å‘å¸ƒåŸå› ï¼ˆå¯é€‰ï¼Œç›´æ¥å›è½¦è·³è¿‡ï¼‰

ä¿®å¤æ„å»ºé—®é¢˜
.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ å‘å¸ƒæ‘˜è¦
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  é¡¹ç›®åç§°: M3U8 Downloader
  å½“å‰ç‰ˆæœ¬: v1.0.0
  å‘å¸ƒç‰ˆæœ¬: v1.0.0 (é‡æ–°å‘å¸ƒï¼Œå°†è¦†ç›– tag)
  æ›´æ–°ç±»å‹: republish
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ç¡®è®¤å‘å¸ƒï¼Ÿ[y/N]: y

ğŸš€ å¼€å§‹å‘å¸ƒæµç¨‹...

ğŸ“¦ æ— éœ€æäº¤ï¼ˆå·¥ä½œç›®å½•å¹²å‡€ï¼‰

ğŸ·ï¸  åˆ›å»º Git Tag...
  åˆ é™¤æ—§ tag v1.0.0...
âœ… Tag v1.0.0 å·²åˆ›å»º

â˜ï¸  æ¨é€åˆ° GitHub...
âœ… Tag å·²å¼ºåˆ¶æ¨é€ï¼ˆè¦†ç›–ï¼‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          âœ… é‡æ–°å‘å¸ƒæˆåŠŸï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## è„šæœ¬åŠŸèƒ½è¯¦è§£

### 1. ç‰ˆæœ¬å·ç®¡ç†

**è‡ªåŠ¨æ›´æ–°ä»¥ä¸‹æ–‡ä»¶ï¼š**

```
package.json                   - "version": "1.0.1"
src-tauri/Cargo.toml          - version = "1.0.1"
src-tauri/tauri.conf.json     - "version": "1.0.1"
```

### 2. Git æäº¤

**è‡ªåŠ¨ç”Ÿæˆ commit messageï¼š**

```
release: v1.0.1

ä¿®å¤æ–‡ä»¶ä¿å­˜åŠŸèƒ½
```

### 3. Git Tag

**è‡ªåŠ¨ç”Ÿæˆ tag messageï¼ˆåŒ…å«è¯¦ç»†ä¿¡æ¯ï¼‰ï¼š**

```
Release v1.0.1

## ğŸ‰ æ”¯æŒå¹³å°
âœ… macOS Apple Silicon (.dmg)
âœ… macOS Intel (.dmg)
âœ… Windows x64 (.msi, .exe)
âœ… Linux x64 (.deb, .AppImage)

## ğŸ“ æ›´æ–°å†…å®¹
ä¿®å¤æ–‡ä»¶ä¿å­˜åŠŸèƒ½

## âœ¨ ä¸»è¦åŠŸèƒ½
- M3U8 è§†é¢‘ä¸‹è½½ï¼ˆåŸæ ¼å¼/MP4è½¬ç ï¼‰
- AES-128 åŠ å¯†è§†é¢‘è§£å¯†
- æµå¼ä¸‹è½½å¤§æ–‡ä»¶
- åŸç”Ÿæ–‡ä»¶ä¿å­˜å¯¹è¯æ¡†
- CORS æ™ºèƒ½å¤„ç†

## ğŸ“¥ å®‰è£…è¯´æ˜
- macOS: åŒå‡» .dmgï¼Œæ‹–æ‹½åˆ° Applications
- Windows: è¿è¡Œ .msi æˆ– .exe
- Linux: sudo dpkg -i *.deb æˆ–è¿è¡Œ .AppImage
```

### 4. GitHub æ¨é€

**è‡ªåŠ¨æ¨é€ï¼š**
- ä»£ç æäº¤åˆ°å½“å‰åˆ†æ”¯ï¼ˆå¦‚ mainï¼‰
- Git Tag åˆ° origin

---

## æ³¨æ„äº‹é¡¹

### âš ï¸ ä½¿ç”¨å‰æ£€æŸ¥

1. **ç¡®ä¿åœ¨æ­£ç¡®çš„åˆ†æ”¯**
   ```bash
   git branch
   # åº”è¯¥åœ¨ main æˆ– master åˆ†æ”¯
   ```

2. **ç¡®ä¿æœ‰ Git è¿œç¨‹ä»“åº“**
   ```bash
   git remote -v
   # åº”è¯¥çœ‹åˆ° origin
   ```

3. **ç¡®ä¿æœ‰æ¨é€æƒé™**
   ```bash
   git push origin main --dry-run
   # æµ‹è¯•æ˜¯å¦å¯ä»¥æ¨é€
   ```

### âš ï¸ é”™è¯¯å¤„ç†

**å¦‚æœè„šæœ¬æ‰§è¡Œå¤±è´¥ï¼š**

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
set -x
bash release.sh

# æˆ–æ‰‹åŠ¨æ‰§è¡Œæ­¥éª¤
git status
git add -A
git commit -m "..."
git tag -a v1.0.1 -m "..."
git push origin main
git push origin v1.0.1
```

### âš ï¸ å›æ»šæ“ä½œ

**å¦‚æœéœ€è¦æ’¤é”€å‘å¸ƒï¼š**

```bash
# åˆ é™¤æœ¬åœ° tag
git tag -d v1.0.1

# åˆ é™¤è¿œç¨‹ tag
git push origin :refs/tags/v1.0.1

# å›é€€ç‰ˆæœ¬å·ï¼ˆæ‰‹åŠ¨ç¼–è¾‘ package.json ç­‰æ–‡ä»¶ï¼‰

# å›é€€ commitï¼ˆå¦‚æœè¿˜æœªæ¨é€ï¼‰
git reset --soft HEAD~1
```

---

## GitHub Actions é›†æˆ

### é…ç½®è‡ªåŠ¨æ„å»º

å¦‚æœé…ç½®äº† GitHub Actionsï¼Œæ¨é€ tag åä¼šè‡ªåŠ¨è§¦å‘æ„å»ºã€‚

**åˆ›å»º `.github/workflows/release.yml`ï¼š**

```yaml
name: Release

on:
  push:
    tags:
      - 'v*'

jobs:
  build:
    strategy:
      matrix:
        os: [macos-latest, windows-latest, ubuntu-latest]

    runs-on: ${{ matrix.os }}

    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 20

      - name: Setup Rust
        uses: dtolnay/rust-toolchain@stable

      - name: Install dependencies
        run: npm install

      - name: Build
        run: npm run tauri build

      - name: Upload artifacts
        uses: actions/upload-artifact@v3
        with:
          name: ${{ matrix.os }}-build
          path: src-tauri/target/release/bundle/
```

---

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•ä¿®æ”¹é¡¹ç›®åç§°ï¼Ÿ

**A:** ç¼–è¾‘è„šæœ¬ä¸­çš„ä»¥ä¸‹è¡Œï¼š

```bash
# ç¬¬ 35 è¡Œå·¦å³
echo -e "${BLUE}          ğŸš€ M3U8 Downloader è‡ªåŠ¨å‘å¸ƒè„šæœ¬${NC}"

# ç¬¬ 264 è¡Œå·¦å³
echo -e "  é¡¹ç›®åç§°: ${BLUE}M3U8 Downloader${NC}"

# ç¬¬ 429-434 è¡Œå·¦å³ï¼ˆäº§ç‰©åç§°ï¼‰
echo -e "  1ï¸âƒ£  M3U8-Downloader-v${NEW_VERSION}-macOS-Apple-Silicon.dmg"
```

### Q: å¦‚ä½•ä¿®æ”¹ GitHub ä»“åº“åœ°å€ï¼Ÿ

**A:** ç¼–è¾‘è„šæœ¬ä¸­çš„ä»¥ä¸‹è¡Œï¼š

```bash
# ç¬¬ 412-416 è¡Œå·¦å³
echo -e "   https://github.com/YOUR_USERNAME/m3u8-downloader/actions"
echo -e "   https://github.com/YOUR_USERNAME/m3u8-downloader/releases/tag/v${NEW_VERSION}"
```

å°† `YOUR_USERNAME` æ›¿æ¢ä¸ºæ‚¨çš„ GitHub ç”¨æˆ·åã€‚

### Q: å¦‚ä½•è‡ªå®šä¹‰ Tag è¯´æ˜ï¼Ÿ

**A:** ç¼–è¾‘è„šæœ¬ä¸­çš„ `TAG_MSG` å˜é‡ï¼ˆç¬¬ 361-382 è¡Œå·¦å³ï¼‰ã€‚

---

## æ€»ç»“

**å‘å¸ƒè„šæœ¬ç‰¹ç‚¹ï¼š**

1. âœ… **è‡ªåŠ¨åŒ–** - ä¸€é”®å®Œæˆæ‰€æœ‰æ­¥éª¤
2. âœ… **æ™ºèƒ½** - è‡ªåŠ¨æ£€æµ‹çŠ¶æ€ï¼Œæ™ºèƒ½å†³ç­–
3. âœ… **å®‰å…¨** - ç¡®è®¤åæ‰æ‰§è¡Œï¼Œæ”¯æŒå›æ»š
4. âœ… **çµæ´»** - æ”¯æŒå¤šç§ç‰ˆæœ¬ç±»å‹
5. âœ… **å‹å¥½** - å½©è‰²è¾“å‡ºï¼Œæ¸…æ™°æç¤º

**æ¨èå·¥ä½œæµï¼š**

```bash
# 1. å¼€å‘å®Œæˆï¼Œæµ‹è¯•é€šè¿‡
npm run tauri dev

# 2. æäº¤ä»£ç ï¼ˆå¯é€‰ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æäº¤ï¼‰
git add -A
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"

# 3. è¿è¡Œå‘å¸ƒè„šæœ¬
bash release.sh

# 4. é€‰æ‹©ç‰ˆæœ¬ç±»å‹ï¼ˆ1-4ï¼‰
# 5. è¾“å…¥æ›´æ–°è¯´æ˜
# 6. ç¡®è®¤å‘å¸ƒ
# 7. ç­‰å¾… GitHub Actions æ„å»ºï¼ˆå¦‚å·²é…ç½®ï¼‰
```

---

**ç¥å‘å¸ƒé¡ºåˆ©ï¼** ğŸ‰

**ç‰ˆæœ¬ï¼š** v1.0.10
**æ—¥æœŸï¼š** 2025-10-27
