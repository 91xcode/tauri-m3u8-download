# M3U8 è§†é¢‘ä¸‹è½½å™¨ - Tauri æ¡Œé¢ç‰ˆä½¿ç”¨æŒ‡å—

## ğŸ“– ç›®å½•

1. [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
2. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
3. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
4. [åŠŸèƒ½è¯´æ˜](#åŠŸèƒ½è¯´æ˜)
5. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
6. [æŠ€æœ¯åŸç†](#æŠ€æœ¯åŸç†)

---

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ **Tauri 2.0** å°è£…çš„ M3U8 è§†é¢‘ä¸‹è½½å™¨æ¡Œé¢åº”ç”¨ã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹© Tauriï¼Ÿ

**æµè§ˆå™¨ç‰ˆæœ¬çš„é™åˆ¶ï¼š**
- âŒ åªèƒ½ä¿å­˜åˆ°ç³»ç»Ÿä¸‹è½½æ–‡ä»¶å¤¹
- âŒ å¤§æ–‡ä»¶ä¸‹è½½å—é™ï¼ˆé€šå¸¸ 2-4GBï¼‰
- âŒ éœ€è¦ HTTPS ç¯å¢ƒæ‰èƒ½ä½¿ç”¨ Service Worker
- âŒ æµè§ˆå™¨å®‰å…¨ç­–ç•¥é™åˆ¶å¤š

**Tauri æ¡Œé¢ç‰ˆçš„ä¼˜åŠ¿ï¼š**
- âœ… **è‡ªç”±é€‰æ‹©ä¿å­˜ä½ç½®** - åŸç”Ÿæ–‡ä»¶ä¿å­˜å¯¹è¯æ¡†
- âœ… **æ— å¤§å°é™åˆ¶** - æ”¯æŒä»»æ„å¤§å°çš„è§†é¢‘ä¸‹è½½
- âœ… **å®Œæ•´æµè§ˆå™¨ç¯å¢ƒ** - æ‰€æœ‰åŸæœ‰åŠŸèƒ½å®Œå…¨å¯ç”¨
- âœ… **è·¨å¹³å°æ”¯æŒ** - Windowsã€macOSã€Linux ä¸€é”®æ‰“åŒ…
- âœ… **é›¶ä»£ç æ”¹åŠ¨** - 100% ä¿ç•™åŸé¡¹ç›®æ¶æ„
- âœ… **æ›´å¥½çš„æ€§èƒ½** - åŸç”Ÿåº”ç”¨å¯åŠ¨æ›´å¿«

### æ ¸å¿ƒç‰¹æ€§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Tauri æ¡Œé¢åº”ç”¨                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   å®Œæ•´æµè§ˆå™¨ç¯å¢ƒï¼ˆWebViewï¼‰       â”‚  â”‚
â”‚  â”‚                                   â”‚  â”‚
â”‚  â”‚  â€¢ M3U8 æ’­æ”¾åˆ—è¡¨è§£æ              â”‚  â”‚
â”‚  â”‚  â€¢ å¤šçº¿ç¨‹å¹¶å‘ä¸‹è½½ TS ç‰‡æ®µ         â”‚  â”‚
â”‚  â”‚  â€¢ AES-128 åŠ å¯†è‡ªåŠ¨è§£å¯†           â”‚  â”‚
â”‚  â”‚  â€¢ MP4 æ ¼å¼è½¬ç                    â”‚  â”‚
â”‚  â”‚  â€¢ Blob ä¸‹è½½ï¼ˆæ‰€æœ‰å¹³å°ï¼‰          â”‚  â”‚
â”‚  â”‚  â€¢ StreamSaver æµå¼ä¸‹è½½           â”‚  â”‚
â”‚  â”‚    (Windows/Linux)                â”‚  â”‚
â”‚  â”‚                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚
â”‚  ğŸ”¥ Tauri æ‹¦æˆªä¸‹è½½ â†’ åŸç”Ÿä¿å­˜å¯¹è¯æ¡†      â”‚
â”‚  â†’ ç”¨æˆ·è‡ªç”±é€‰æ‹©ä¿å­˜ä½ç½® â†’ å®Œæˆï¼         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¯å¢ƒå‡†å¤‡

### 1. å®‰è£… Node.js

**macOS:**
```bash
# ä½¿ç”¨ Homebrew
brew install node

# æˆ–ä½¿ç”¨ nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20
nvm use 20
```

**Windows:**
- ä¸‹è½½å®‰è£…åŒ…ï¼šhttps://nodejs.org/
- é€‰æ‹© LTS ç‰ˆæœ¬ï¼ˆæ¨è v20.xï¼‰

**Linux (Ubuntu/Debian):**
```bash
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs
```

éªŒè¯å®‰è£…ï¼š
```bash
node --version  # åº”æ˜¾ç¤º v20.x.x
npm --version   # åº”æ˜¾ç¤º 10.x.x
```

### 2. å®‰è£… Rust

**æ‰€æœ‰å¹³å°:**
```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

å®‰è£…å®Œæˆåï¼Œé‡å¯ç»ˆç«¯ï¼ŒéªŒè¯ï¼š
```bash
rustc --version  # åº”æ˜¾ç¤º rustc 1.x.x
cargo --version  # åº”æ˜¾ç¤º cargo 1.x.x
```

### 3. å¹³å°ç‰¹å®šä¾èµ–

**macOS:**
```bash
xcode-select --install
```

**Linux (Ubuntu/Debian):**
```bash
sudo apt update
sudo apt install libwebkit2gtk-4.1-dev \
    build-essential \
    curl \
    wget \
    file \
    libxdo-dev \
    libssl-dev \
    libayatana-appindicator3-dev \
    librsvg2-dev
```

**Windows:**
- å®‰è£… Visual Studio 2022 Community Edition
- å‹¾é€‰ "C++ æ¡Œé¢å¼€å‘" å·¥ä½œè´Ÿè½½
- æˆ–å®‰è£… Build Tools for Visual Studio 2022

---

## å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¿«é€Ÿå¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd m3u8-downloader
./quick-start.sh
```

ç„¶åæŒ‰æç¤ºé€‰æ‹©æ“ä½œï¼š
- `1` - å¼€å‘æ¨¡å¼è¿è¡Œ
- `2` - æ‰“åŒ…åº”ç”¨
- `3` - ä»…å®‰è£…ä¾èµ–

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å‘½ä»¤

#### 1. å®‰è£…ä¾èµ–
```bash
cd m3u8-downloader
npm install
```

#### 2. å¼€å‘æ¨¡å¼è¿è¡Œ
```bash
npm run tauri dev
```

**é¦–æ¬¡è¿è¡Œè¯´æ˜ï¼š**
- â° éœ€è¦ç¼–è¯‘ Rust ä¾èµ–ï¼Œé¢„è®¡ 5-10 åˆ†é’Ÿ
- ğŸ’¡ ç¼–è¯‘å®Œæˆåä¼šè‡ªåŠ¨æ‰“å¼€åº”ç”¨çª—å£
- ğŸ”„ åç»­è¿è¡Œå¯åŠ¨é€Ÿåº¦å¾ˆå¿«ï¼ˆå‡ ç§’ï¼‰

#### 3. æ‰“åŒ…åº”ç”¨
```bash
npm run tauri build
```

**æ‰“åŒ…æ—¶é—´ï¼š**
- é¢„è®¡ 10-15 åˆ†é’Ÿ
- åŒ…å«ä¼˜åŒ–ç¼–è¯‘å’Œä»£ç ç­¾å

**æ‰“åŒ…è¾“å‡ºä½ç½®ï¼š**
- **macOS:** `src-tauri/target/release/bundle/dmg/M3U8 Downloader_1.0.0_*.dmg`
- **Windows:** `src-tauri/target/release/bundle/msi/M3U8 Downloader_1.0.0_*.msi`
- **Linux:**
  - DEB: `src-tauri/target/release/bundle/deb/m3u8-downloader_1.0.0_*.deb`
  - AppImage: `src-tauri/target/release/bundle/appimage/m3u8-downloader_1.0.0_*.AppImage`

---

## åŠŸèƒ½è¯´æ˜

### 1. ä¸‹è½½ M3U8 è§†é¢‘

#### æ­¥éª¤ 1ï¼šè¾“å…¥ M3U8 é“¾æ¥
åœ¨ç•Œé¢é¡¶éƒ¨è¾“å…¥æ¡†ä¸­ç²˜è´´ M3U8 æ’­æ”¾åˆ—è¡¨åœ°å€ï¼Œä¾‹å¦‚ï¼š
```
https://example.com/video/playlist.m3u8
```

#### æ­¥éª¤ 2ï¼šé€‰æ‹©ä¸‹è½½æ¨¡å¼

**åŸæ ¼å¼ä¸‹è½½ï¼ˆTS æ ¼å¼ï¼‰ï¼š**
- ç‚¹å‡» "åŸæ ¼å¼ä¸‹è½½" æŒ‰é’®
- ç›´æ¥ä¿å­˜ä¸º TS æ ¼å¼ï¼Œæ— éœ€è½¬ç 
- é€Ÿåº¦æœ€å¿«

**è½¬ç ä¸º MP4 ä¸‹è½½ï¼š**
- ç‚¹å‡» "è½¬ç ä¸º MP4 ä¸‹è½½" æŒ‰é’®
- è‡ªåŠ¨è½¬ç ä¸º MP4 æ ¼å¼
- å…¼å®¹æ€§æ›´å¥½

**ç‰¹å¤§è§†é¢‘æµå¼ä¸‹è½½ï¼ˆæ¨èå¤§æ–‡ä»¶ï¼‰ï¼š**
- ç‚¹å‡» "ç‰¹å¤§è§†é¢‘æµå¼ä¸‹è½½" æŒ‰é’®
- è¾¹ä¸‹è½½è¾¹ä¿å­˜ï¼Œå†…å­˜å ç”¨ä½
- é€‚åˆè¶…å¤§è§†é¢‘ï¼ˆ>2GBï¼‰
- **æ³¨æ„ï¼š** macOS ä¼šè‡ªåŠ¨é™çº§ä¸º Blob æ¨¡å¼

#### æ­¥éª¤ 3ï¼šé€‰æ‹©ä¿å­˜ä½ç½®
- ğŸ”¥ Tauri ä¼šå¼¹å‡ºåŸç”Ÿæ–‡ä»¶ä¿å­˜å¯¹è¯æ¡†
- è‡ªç”±é€‰æ‹©ä¿å­˜ä½ç½®ï¼ˆä¸å—é™åˆ¶ï¼ï¼‰
- è‡ªå®šä¹‰æ–‡ä»¶å
- ç‚¹å‡»"ä¿å­˜"å¼€å§‹ä¸‹è½½

#### æ­¥éª¤ 4ï¼šç­‰å¾…ä¸‹è½½å®Œæˆ
- ç•Œé¢æ˜¾ç¤ºå®æ—¶ä¸‹è½½è¿›åº¦
- æ˜¾ç¤ºä¸‹è½½é€Ÿåº¦
- æ˜¾ç¤ºå·²ä¸‹è½½ç‰‡æ®µæ•°é‡

### 2. é«˜çº§åŠŸèƒ½

#### è‡ªå®šä¹‰ä¸‹è½½çº¿ç¨‹æ•°
- é»˜è®¤ï¼š6 ä¸ªå¹¶å‘çº¿ç¨‹
- å¯è°ƒæ•´èŒƒå›´ï¼š1-10
- æ›´å¤šçº¿ç¨‹ = æ›´å¿«ä¸‹è½½é€Ÿåº¦ï¼ˆéœ€è¦ç½‘ç»œæ”¯æŒï¼‰

#### AES åŠ å¯†è‡ªåŠ¨å¤„ç†
- è‡ªåŠ¨æ£€æµ‹ M3U8 ä¸­çš„åŠ å¯†ä¿¡æ¯
- è‡ªåŠ¨ä¸‹è½½ AES Key
- è‡ªåŠ¨è§£å¯† TS ç‰‡æ®µ
- ç”¨æˆ·æ— éœ€ä»»ä½•æ“ä½œ

#### è·¨åŸŸè¯·æ±‚è‡ªåŠ¨å¤„ç†
- Tauri å†…ç½® CORS ä»£ç†
- è‡ªåŠ¨å¤„ç†è·¨åŸŸé—®é¢˜
- æ— éœ€é¢å¤–é…ç½®

### 3. ä¸‹è½½æ¨¡å¼è¯¦è§£

#### Blob æ¨¡å¼ï¼ˆæ‰€æœ‰å¹³å°ï¼‰

**å·¥ä½œåŸç†ï¼š**
```
ä¸‹è½½æ‰€æœ‰ TS ç‰‡æ®µ â†’ å†…å­˜ä¸­ç¼“å­˜ â†’
AES è§£å¯†ï¼ˆå¦‚éœ€è¦ï¼‰ â†’ MP4 è½¬ç ï¼ˆå¦‚éœ€è¦ï¼‰ â†’
ç”Ÿæˆ Blob å¯¹è±¡ â†’ Tauri æ‹¦æˆªä¸‹è½½ â†’
åŸç”Ÿä¿å­˜å¯¹è¯æ¡† â†’ å®Œæˆï¼
```

**ä¼˜ç‚¹ï¼š**
- âœ… æ‰€æœ‰å¹³å°æ”¯æŒ
- âœ… ç¨³å®šå¯é 
- âœ… è½¬ç è´¨é‡å¥½

**ç¼ºç‚¹ï¼š**
- âš ï¸ å†…å­˜å ç”¨é«˜ï¼ˆè§†é¢‘å¤§å° â‰ˆ å†…å­˜å ç”¨ï¼‰
- âš ï¸ ä¸é€‚åˆè¶…å¤§æ–‡ä»¶ï¼ˆ>4GBï¼‰

**é€‚ç”¨åœºæ™¯ï¼š**
- ä¸­å°å‹è§†é¢‘ï¼ˆ<2GBï¼‰
- éœ€è¦ MP4 è½¬ç 
- macOS å¹³å°

#### StreamSaver æµå¼æ¨¡å¼ï¼ˆWindows/Linuxï¼‰

**å·¥ä½œåŸç†ï¼š**
```
ä¸‹è½½ TS ç‰‡æ®µ â†’ è¾¹ä¸‹è½½è¾¹è§£å¯† â†’
è¾¹è½¬ç è¾¹å†™å…¥æµ â†’ Tauri æ‹¦æˆªä¸‹è½½ â†’
åŸç”Ÿä¿å­˜å¯¹è¯æ¡† â†’ è¾¹ä¸‹è½½è¾¹ä¿å­˜ â†’ å®Œæˆï¼
```

**ä¼˜ç‚¹ï¼š**
- âœ… å†…å­˜å ç”¨æä½ï¼ˆ<100MBï¼‰
- âœ… æ”¯æŒè¶…å¤§æ–‡ä»¶ï¼ˆæ— é™åˆ¶ï¼‰
- âœ… ä¸‹è½½é€Ÿåº¦å¿«

**ç¼ºç‚¹ï¼š**
- âš ï¸ macOS ä¸æ”¯æŒï¼ˆè‡ªåŠ¨é™çº§ä¸º Blobï¼‰

**é€‚ç”¨åœºæ™¯ï¼š**
- è¶…å¤§è§†é¢‘ï¼ˆ>2GBï¼‰
- Windows/Linux å¹³å°
- å†…å­˜å—é™ç¯å¢ƒ

---

## å¸¸è§é—®é¢˜

### Q1: é¦–æ¬¡è¿è¡Œä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢ï¼Ÿ

**A:** é¦–æ¬¡è¿è¡Œéœ€è¦ç¼–è¯‘ Rust ä¾èµ–ï¼ˆçº¦ 450+ ä¸ªåŒ…ï¼‰ï¼Œé¢„è®¡ 5-10 åˆ†é’Ÿã€‚åç»­è¿è¡Œå¯åŠ¨é€Ÿåº¦å¾ˆå¿«ï¼ˆå‡ ç§’ï¼‰ã€‚

### Q2: macOS ä¸Šæ— æ³•ä½¿ç”¨æµå¼ä¸‹è½½ï¼Ÿ

**A:** macOS çš„ WKWebView å¯¹ Service Worker æ”¯æŒæœ‰é™ï¼ŒStreamSaver ä¼šè‡ªåŠ¨é™çº§ä¸º Blob æ¨¡å¼ã€‚åŠŸèƒ½å®Œå…¨æ­£å¸¸ï¼Œåªæ˜¯å†…å­˜å ç”¨ç¨é«˜ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**
- å°æ–‡ä»¶ï¼ˆ<2GBï¼‰ï¼šæ— å½±å“
- å¤§æ–‡ä»¶ï¼ˆ>2GBï¼‰ï¼šå»ºè®®åœ¨ Windows/Linux ä¸Šä¸‹è½½

### Q3: ä¸‹è½½å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**å¯èƒ½åŸå› åŠè§£å†³æ–¹æ³•ï¼š**

1. **M3U8 é“¾æ¥æ— æ•ˆ**
   - æ£€æŸ¥é“¾æ¥æ˜¯å¦æ­£ç¡®
   - å°è¯•åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—®

2. **ç½‘ç»œé—®é¢˜**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - å°è¯•ä½¿ç”¨ VPN
   - å‡å°‘å¹¶å‘çº¿ç¨‹æ•°

3. **æœåŠ¡å™¨é™åˆ¶**
   - æŸäº›æœåŠ¡å™¨é™åˆ¶å¹¶å‘è¯·æ±‚
   - å‡å°‘çº¿ç¨‹æ•°åˆ° 2-3
   - æ›´æ¢æ—¶é—´æ®µé‡è¯•

4. **AES Key æ— æ³•ä¸‹è½½**
   - æ£€æŸ¥ Key URL æ˜¯å¦å¯è®¿é—®
   - å¯èƒ½éœ€è¦ç‰¹å®š Headersï¼ˆæš‚ä¸æ”¯æŒï¼‰

### Q4: èƒ½å¦ä¸‹è½½åŠ å¯†è§†é¢‘ï¼Ÿ

**A:** æ”¯æŒæ ‡å‡† AES-128 åŠ å¯†çš„ M3U8 è§†é¢‘ã€‚ç¨‹åºä¼šè‡ªåŠ¨ï¼š
- è§£æ `#EXT-X-KEY` æ ‡ç­¾
- ä¸‹è½½ AES Key
- è§£å¯† TS ç‰‡æ®µ

**ä¸æ”¯æŒï¼š**
- DRM åŠ å¯†ï¼ˆWidevineã€FairPlay ç­‰ï¼‰
- è‡ªå®šä¹‰åŠ å¯†ç®—æ³•

### Q5: ä¸ºä»€ä¹ˆå†…å­˜å ç”¨è¿™ä¹ˆé«˜ï¼Ÿ

**A:** Blob æ¨¡å¼ä¸‹ï¼Œéœ€è¦å°†æ•´ä¸ªè§†é¢‘ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚

**è§£å†³æ–¹æ³•ï¼š**
- ä½¿ç”¨æµå¼ä¸‹è½½ï¼ˆWindows/Linuxï¼‰
- å…³é—­å…¶ä»–å ç”¨å†…å­˜çš„åº”ç”¨
- ä¸‹è½½å®Œæˆåå†…å­˜ä¼šè‡ªåŠ¨é‡Šæ”¾

### Q6: æ‰“åŒ…åçš„åº”ç”¨ä½“ç§¯ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤§ï¼Ÿ

**A:** Tauri åº”ç”¨åŒ…å«ï¼š
- WebView è¿è¡Œæ—¶ï¼ˆmacOS å¤ç”¨ç³»ç»Ÿï¼ŒWindows å†…ç½® Edge WebView2ï¼‰
- Rust ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶
- åº”ç”¨èµ„æºå’Œå›¾æ ‡

**å…¸å‹ä½“ç§¯ï¼š**
- macOS: 5-10 MB
- Windows: 15-20 MBï¼ˆåŒ…å« WebView2 å®‰è£…å™¨ï¼‰
- Linux: 10-15 MB

### Q7: å¦‚ä½•è®¾ç½®è‡ªå®šä¹‰ User-Agentï¼Ÿ

**A:** æš‚ä¸æ”¯æŒã€‚å½“å‰ç‰ˆæœ¬ä½¿ç”¨é»˜è®¤ User-Agentã€‚

**è®¡åˆ’æ”¯æŒï¼š**
- v1.1.0 å°†æ·»åŠ è®¾ç½®ç•Œé¢
- æ”¯æŒè‡ªå®šä¹‰ Headers

### Q8: èƒ½å¦åŒæ—¶ä¸‹è½½å¤šä¸ªè§†é¢‘ï¼Ÿ

**A:** å½“å‰ç‰ˆæœ¬ä¸æ”¯æŒé˜Ÿåˆ—ä¸‹è½½ã€‚å»ºè®®ï¼š
- å•ä¸ªä¸‹è½½å®Œæˆåå†å¼€å§‹ä¸‹ä¸€ä¸ª
- æˆ–æ‰“å¼€å¤šä¸ªåº”ç”¨çª—å£ï¼ˆä¸æ¨èï¼‰

**è®¡åˆ’æ”¯æŒï¼š**
- v1.2.0 å°†æ·»åŠ ä¸‹è½½é˜Ÿåˆ—åŠŸèƒ½

### Q9: è½¬ç åçš„ MP4 è´¨é‡å¦‚ä½•ï¼Ÿ

**A:** ä½¿ç”¨ mux.js è¿›è¡Œè½¬ç ï¼š
- æ— æŸè½¬å°è£…ï¼ˆä¸é‡æ–°ç¼–ç ï¼‰
- ä¿æŒåŸå§‹è§†é¢‘è´¨é‡
- ä»…æ”¹å˜å®¹å™¨æ ¼å¼ï¼ˆTS â†’ MP4ï¼‰

### Q10: å¦‚ä½•å¸è½½åº”ç”¨ï¼Ÿ

**macOS:**
```bash
# å°†åº”ç”¨æ‹–åˆ°åºŸçº¸ç¯“
# æˆ–ä½¿ç”¨å‘½ä»¤
rm -rf /Applications/M3U8\ Downloader.app
```

**Windows:**
- æ§åˆ¶é¢æ¿ â†’ ç¨‹åºå’ŒåŠŸèƒ½ â†’ å¸è½½
- æˆ–ä½¿ç”¨åŸå§‹ .msi å®‰è£…åŒ…å¸è½½

**Linux (DEB):**
```bash
sudo apt remove m3u8-downloader
```

**Linux (AppImage):**
```bash
# ç›´æ¥åˆ é™¤ .AppImage æ–‡ä»¶å³å¯
rm M3U8\ Downloader.AppImage
```

---

## æŠ€æœ¯åŸç†

### 1. Tauri æ¶æ„

Tauri ä½¿ç”¨ç³»ç»ŸåŸç”Ÿ WebViewï¼Œä¸æ‰“åŒ…æ•´ä¸ªæµè§ˆå™¨å¼•æ“ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Tauri Application             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Frontend (WebView)   â”‚  Backend (Rust) â”‚
â”‚  â”œâ”€ HTML/CSS/JS       â”‚  â”œâ”€ çª—å£ç®¡ç†     â”‚
â”‚  â”œâ”€ Vue.js            â”‚  â”œâ”€ æ–‡ä»¶ç³»ç»Ÿ     â”‚
â”‚  â”œâ”€ M3U8 ä¸‹è½½é€»è¾‘     â”‚  â”œâ”€ HTTP æ’ä»¶    â”‚
â”‚  â””â”€ æµè§ˆå™¨ API        â”‚  â””â”€ IPC é€šä¿¡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. WebView å¯¹æ¯”

| å¹³å°    | WebView å¼•æ“    | ç‰ˆæœ¬               | è¯´æ˜                |
|---------|-----------------|--------------------|--------------------|
| macOS   | WKWebView       | Safari åŒç‰ˆæœ¬      | ç³»ç»Ÿå†…ç½®ï¼Œæ— éœ€é¢å¤–å ç”¨ |
| Windows | Edge WebView2   | Chromium å†…æ ¸      | é¦–æ¬¡è¿è¡Œè‡ªåŠ¨å®‰è£…    |
| Linux   | WebKitGTK       | WebKit æœ€æ–°ç‰ˆ      | éœ€è¦ç³»ç»Ÿä¾èµ–        |

### 3. ä¸‹è½½æµç¨‹è¯¦è§£

#### Blob ä¸‹è½½æµç¨‹ï¼ˆæ‰€æœ‰å¹³å°ï¼‰

```javascript
// 1. è§£æ M3U8
const segments = parseM3U8(playlistUrl)

// 2. å¹¶å‘ä¸‹è½½ TS ç‰‡æ®µ
const promises = segments.map(seg => downloadSegment(seg))
const tsData = await Promise.all(promises)

// 3. AES è§£å¯†ï¼ˆå¦‚éœ€è¦ï¼‰
if (encrypted) {
    const key = await downloadKey(keyUrl)
    tsData = tsData.map(ts => aesDecrypt(ts, key))
}

// 4. MP4 è½¬ç ï¼ˆå¦‚éœ€è¦ï¼‰
let finalData = tsData
if (needTranscode) {
    finalData = muxToMP4(tsData)
}

// 5. ç”Ÿæˆ Blob å¹¶è§¦å‘ä¸‹è½½
const blob = new Blob(finalData, { type: 'video/mp4' })
const url = URL.createObjectURL(blob)
const a = document.createElement('a')
a.href = url
a.download = fileName
a.click()  // ğŸ”¥ Tauri åœ¨è¿™é‡Œæ‹¦æˆªï¼

// 6. Tauri æ‹¦æˆªä¸‹è½½
// â†’ å¼¹å‡ºåŸç”Ÿæ–‡ä»¶ä¿å­˜å¯¹è¯æ¡†
// â†’ ç”¨æˆ·é€‰æ‹©ä½ç½®
// â†’ ä¿å­˜æ–‡ä»¶
// â†’ å®Œæˆï¼
```

#### StreamSaver æµå¼ä¸‹è½½æµç¨‹ï¼ˆWindows/Linuxï¼‰

```javascript
// 1. æ³¨å†Œ Service Worker
await navigator.serviceWorker.register('./serviceworker.js')

// 2. åˆ›å»ºå¯å†™æµ
const fileStream = streamSaver.createWriteStream(fileName)
const writer = fileStream.getWriter()

// 3. è¾¹ä¸‹è½½è¾¹å†™å…¥
for (const segment of segments) {
    const data = await downloadSegment(segment)

    // è§£å¯†ï¼ˆå¦‚éœ€è¦ï¼‰
    if (encrypted) {
        data = aesDecrypt(data, key)
    }

    // å†™å…¥æµ
    await writer.write(new Uint8Array(data))
}

// 4. å…³é—­æµ
await writer.close()

// 5. Tauri æ‹¦æˆª
// â†’ åŸç”Ÿä¿å­˜å¯¹è¯æ¡†
// â†’ å®Œæˆï¼
```

### 4. vs çº¯ Web ç‰ˆæœ¬

| ç‰¹æ€§           | Web ç‰ˆæœ¬              | Tauri ç‰ˆæœ¬           |
|----------------|-----------------------|----------------------|
| è¿è¡Œç¯å¢ƒ       | æµè§ˆå™¨                | æ¡Œé¢åº”ç”¨             |
| ä¸‹è½½ä½ç½®       | å›ºå®šä¸‹è½½æ–‡ä»¶å¤¹        | âœ… è‡ªç”±é€‰æ‹©          |
| å¤§æ–‡ä»¶æ”¯æŒ     | å—é™ï¼ˆ2-4GBï¼‰         | âœ… æ— é™åˆ¶            |
| Service Worker | éœ€è¦ HTTPS            | âœ… æ— è¦æ±‚            |
| å†…å­˜å ç”¨       | å—æµè§ˆå™¨é™åˆ¶          | âœ… æ›´çµæ´»            |
| CORS é—®é¢˜      | éœ€è¦æœåŠ¡å™¨é…ç½®        | âœ… è‡ªåŠ¨å¤„ç†          |
| å¯åŠ¨é€Ÿåº¦       | å³å¼€å³ç”¨              | éœ€è¦å¯åŠ¨åº”ç”¨         |
| ç¦»çº¿ä½¿ç”¨       | éœ€è¦ Service Worker   | âœ… å®Œå…¨ç¦»çº¿          |
| æ›´æ–°æœºåˆ¶       | åˆ·æ–°é¡µé¢              | âœ… åº”ç”¨è‡ªåŠ¨æ›´æ–°      |

---

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-10-27)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®Œæ•´è¿ç§»åŸé¡¹ç›®åŠŸèƒ½
- âœ… æ”¯æŒ Windowsã€macOSã€Linux
- âœ… Blob ä¸‹è½½æ¨¡å¼ï¼ˆæ‰€æœ‰å¹³å°ï¼‰
- âœ… StreamSaver æµå¼ä¸‹è½½ï¼ˆWindows/Linuxï¼‰
- âœ… åŸç”Ÿæ–‡ä»¶ä¿å­˜å¯¹è¯æ¡†
- âœ… AES-128 åŠ å¯†è‡ªåŠ¨è§£å¯†
- âœ… MP4 è½¬ç æ”¯æŒ
- âœ… å¤šçº¿ç¨‹å¹¶å‘ä¸‹è½½
- âœ… å®æ—¶è¿›åº¦æ˜¾ç¤º

### è®¡åˆ’åŠŸèƒ½ï¼ˆv1.1.0ï¼‰
- [ ] ä¸‹è½½é˜Ÿåˆ—ç®¡ç†
- [ ] è‡ªå®šä¹‰ Headers æ”¯æŒ
- [ ] ä»£ç†è®¾ç½®
- [ ] ä¸‹è½½å†å²è®°å½•
- [ ] è‡ªåŠ¨æ›´æ–°åŠŸèƒ½
- [ ] ä¸»é¢˜åˆ‡æ¢ï¼ˆæš—è‰²æ¨¡å¼ï¼‰

---

## åé¦ˆä¸æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿæ¬¢è¿åé¦ˆï¼

- ğŸ“§ Email: your-email@example.com
- ğŸ› Issue: https://github.com/your-repo/issues
- ğŸ’¬ è®¨è®º: https://github.com/your-repo/discussions

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰**
